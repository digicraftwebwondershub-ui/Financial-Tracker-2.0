<style>
    /* Modern UI/UX Styles */
    :root {
        --primary-color: #007bff; /* Bootstrap Blue */
        --secondary-color: #6c757d;
        --success-color: #28a745;
        --danger-color: #dc3545;
        --warning-color: #ffc107;
        --light-bg: #f8f9fa;
        --dark-bg: #212529;
        --card-bg: #ffffff;
        --text-color: #212529;
    }

    body {
        background-color: var(--light-bg);
        color: var(--text-color);
        transition: background-color 0.3s, color 0.3s;
    }
    
    /* Dark Mode Overrides */
    body.dark-mode {
        --light-bg: #121212;
        --dark-bg: #1e1e1e;
        --card-bg: #1e1e1e;
        --text-color: #e0e0e0;
        background-color: var(--light-bg);
    }

    /* Additions for better dark mode compatibility */

    /* Ensure all text inside the main container is light */
    body.dark-mode .container-fluid,
    body.dark-mode .h1,
    body.dark-mode .h2,
    body.dark-mode h1,
    body.dark-mode h2,
    body.dark-mode p,
    body.dark-mode .card-title,
    body.dark-mode .card-text {
    color: var(--text-color) !important;
    }

    /* Fix Bootstrap alert background in dark mode */
    body.dark-mode .alert-info {
    background-color: #0d3b66 !important; /* Darker blue */
    color: #cce5ff !important;
    border-color: #082845 !important;
    }

    /* Ensure the text inside the grey placeholders also becomes light */
    body.dark-mode .stat-card {
    color: var(--text-color) !important;
    }

    body.dark-mode .navbar-light { background-color: var(--dark-bg) !important; border-bottom: 1px solid #333; }
    body.dark-mode .navbar-light .navbar-brand,
    body.dark-mode .navbar-light .nav-link { color: var(--text-color); }
    body.dark-mode .bg-light { background-color: var(--dark-bg) !important; }
    body.dark-mode .text-muted { color: #aaa !important; }
    body.dark-mode .card {
        background-color: var(--card-bg);
        border-color: #333;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.2);
        color: var(--text-color);
    }
    body.dark-mode .form-control, 
    body.dark-mode .form-select { background-color: #333; color: var(--text-color); border-color: #444; }
    body.dark-mode .modal-content { background-color: var(--dark-bg); }
    body.dark-mode table { color: var(--text-color); }
    body.dark-mode .card-title { color: var(--text-color) !important; }

    /* Credit Card List Styling */
    .credit-card-item .progress-bar {
        background-color: var(--primary-color);
    }
    .usage-badge {
        font-size: 0.8rem;
    }


    /* Sidebar Styling */
    .sidebar { 
        position: fixed; 
        top: 0; 
        bottom: 0; 
        left: 0; 
        z-index: 1000; 
        padding: 48px 0 0; /* space for the navbar */
        box-shadow: 0 0 10px rgba(0,0,0,.1);
        border-right: 1px solid rgba(0,0,0,.1);
    }
    body.dark-mode .sidebar { border-right-color: #333; }

    .sidebar-sticky { position: relative; top: 0; height: calc(100vh - 48px); overflow-x: hidden; overflow-y: auto; }
    .sidebar .nav-link { font-weight: 500; color: var(--secondary-color); padding: 0.75rem 1rem; }
    .sidebar .nav-link.active { color: var(--primary-color); background-color: #e9ecef; border-left: 4px solid var(--primary-color); }
    body.dark-mode .sidebar .nav-link.active { background-color: #333; }

    /* Main Content */
    main { 
    /* Increased top padding to push content below the fixed navbar (which is ~48px tall) */
    padding-top: 3rem !important; 
    padding-bottom: 2rem; /* Add some bottom spacing too */
}

    /* Dashboard Cards */
    .stat-card {
        border: none;
        border-radius: 10px;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.05);
        transition: transform 0.2s;
    }
    .stat-card:hover { transform: translateY(-3px); }
    .stat-icon { font-size: 2rem; color: var(--primary-color); }

    /* Microcopy/Toast */
    .snackbar {
        visibility: hidden; 
        min-width: 250px; 
        background-color: #333; 
        color: #fff; 
        text-align: center; 
        border-radius: 2px; 
        padding: 16px; 
        position: fixed; 
        z-index: 9999; 
        left: 50%; 
        transform: translateX(-50%);
        bottom: 30px; 
    }

    .snackbar.show { visibility: visible; -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s; animation: fadein 0.5s, fadeout 0.5s 2.5s; }

    @-webkit-keyframes fadein { from { bottom: 0; opacity: 0; } to { bottom: 30px; opacity: 1; } }
    @keyframes fadein { from { bottom: 0; opacity: 0; } to { bottom: 30px; opacity: 1; } }
    @-webkit-keyframes fadeout { from { bottom: 30px; opacity: 1; } to { bottom: 0; opacity: 0; } }
    @keyframes fadeout { from { bottom: 30px; opacity: 1; } to { bottom: 0; opacity: 0; } }
    
    .table-responsive { overflow-x: auto; }
</style>
